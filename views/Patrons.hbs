{{!Lorraine Byrne and Suhayl Khan }}
{{! CS 340 Summer 2025 }}
{{! Roll the Dice Database }}
{{! For Games }}
{{! Citations: }}
{{!Structures and Setup:}} 
{{! https://canvas.oregonstate.edu/courses/2007765/assignments/10118865 }}
{{! https://canvas.oregonstate.edu/courses/2007765/pages/exploration-web-application-technology-2?module_item_id=25664612 }}
{{! Handlebar: }}
{{! https://handlebarsjs.com/guide/ }}

<h1>Patrons</h1>

{{! READ table }}
<table>
    <thead>
        <tr>
            {{#each Patrons.[0]}}
            <th>{{@key}}</th>
            {{/each}}
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {{#each Patrons}}
        <tr>
            <td>{{this.patronID}}</td>
            <td>{{this.firstName}}</td>
            <td>{{this.lastName}}</td>
            <td>{{this.phoneNumber}}</td>
            <td>{{this.email}}</td>
            <td>
                <form class="delete-form" method="POST">
                    <input type="hidden" name="delete_patron_id" value="{{this.patronID}}" />
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>

{{! CREATE form }}
<h2>Add a Patron</h2>
<form class="cuForm" id="create_patron_form" method="POST">
    <label for="create_first_name">First Name:</label>
    <input type="text" name="create_first_name" id="create_first_name" required />

    <label for="create_last_name">Last Name:</label>
    <input type="text" name="create_last_name" id="create_last_name" required />

    <label for="create_phone_number">Phone Number:</label>
    <input type="text" name="create_phone_number" id="create_phone_number" required />

    <label for="create_email">Email:</label>
    <input type="email" name="create_email" id="create_email" required />

    <input type="submit" value="Add Patron" />
</form>

{{! UPDATE form }}
<h2>Update a Patron</h2>
<form class="cuForm" id="update_patron_form" method="POST">
    <label for="update_patron_id">Patron to Update:</label>
    <select name="update_patron_id" id="update_patron_id" required>
        <option value="" disabled selected>Select a Patron</option>
        {{#each Patrons}}
        <option value="{{this.patronID}}">
            {{this.patronID}} - {{this.firstName}} {{this.lastName}}
        </option>
        {{/each}}
    </select>

    <label for="update_first_name">New First Name:</label>
    <input type="text" name="update_first_name" id="update_first_name" required />

    <label for="update_last_name">New Last Name:</label>
    <input type="text" name="update_last_name" id="update_last_name" required />

    <label for="update_phone_number">New Phone Number:</label>
    <input type="text" name="update_phone_number" id="update_phone_number" required />

    <label for="update_email">New Email:</label>
    <input type="email" name="update_email" id="update_email" required />

    <input type="submit" value="Update Patron" />
</form>
